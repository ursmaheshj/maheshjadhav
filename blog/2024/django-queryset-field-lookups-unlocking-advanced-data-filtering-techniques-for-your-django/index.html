<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <h3>Django QuerySet Field Lookups: Unlocking Advanced Data Filtering Techniques for Your Django Application</h3> <figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*A8jYHk2RX8aMRzZ9-LSaow.png"><figcaption>Django QuerySet Field Lookups</figcaption></figure> <p>Field lookups are how you specify the meat of an SQL <strong>WHERE </strong>clause. They’re specified as keyword arguments to the <strong>QuerySet</strong> methods <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.filter" rel="external nofollow noopener" target="_blank"><strong>filter()</strong></a>, <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.exclude" rel="external nofollow noopener" target="_blank"><strong>exclude()</strong></a> and <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.get" rel="external nofollow noopener" target="_blank"><strong>get()</strong></a>. They help us to apply conditions while retrieving the records.</p> <p><strong>syntax</strong>: (<em>fieldname__lookuptype = value)</em><strong><br>eg</strong>: <em>model.objects.filter(id__gt=5)</em></p> <p>To understand the field lookups in depth and how to use them in your Django application lets create below model in <em>models.py</em> file.</p> <pre>#models.py <br>class Player(models.Model):<br>    jerseyno = models.IntegerField(null=False,unique=True)<br>    name = models.CharField(max_length=50)<br>    city = models.CharField(max_length=100)<br>    totalruns = models.IntegerField()<br>    birthdate = models.DateField()<br>    testdebut = models.DateTimeField()</pre> <figure><img alt="" src="https://cdn-images-1.medium.com/max/904/1*pn1unVjafFOj2syxu1Zfzw.png"></figure> <p>Considering we have above data in our database based on our <em>Player </em>model, lets try to retrieve the data using field lookups.</p> <blockquote> <em>1. </em><strong><em>exact</em></strong><em>: Matches the exact values in field.</em> </blockquote> <p><em>eg: Player.objects.filter(city__exact=’Delhi’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/647/1*Ut8R4CoMRSnQqrKBUyL4uQ.png"></figure> <blockquote> <em>2. </em><strong><em>iexact</em></strong><em>: Matches the exact values in field but ignores the case sensitivity.</em> </blockquote> <p><em>eg: Player.objects.filter(city__iexact=’Delhi’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/700/1*n5Yyg89jBFEZuLQnS_q6sg.png"></figure> <blockquote> <em>3.</em><strong><em> contains</em></strong><em>: Matches field values that contains given value in it. Use ‘</em><strong><em>icontains</em></strong><em>’ to ignore case sensitivity.</em> </blockquote> <p><em>eg: Player.objects.filter(city__contains=’hi’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/714/1*e_U8rRqtAtpvkb1U8wOoxQ.png"></figure> <blockquote> <em>4. </em><strong><em>in</em></strong><em>: Matches field value in list of values.</em> </blockquote> <p><em>eg: Player.objects.filter(jerseyno__in=[7,10,18])</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/741/1*pVOnj700WF0fdyQ4iWoNHw.png"></figure> <blockquote> <em>5. </em><strong><em>gt</em></strong><em>: Matches all the field values which are greater than given value. Use ‘</em><strong><em>gte’ </em></strong><em>for greater than or equals to.</em> </blockquote> <p><em>eg: Player.objects.filter(totalruns__gt=18820)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/739/1*1_CMxHd9XflJL0b9CFHpbg.png"></figure> <p><em>eg: Player.objects.filter(totalruns__gte=18820)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/742/1*G4NkXEnBZpWkG3jnp-1jCA.png"></figure> <blockquote> <em>6. </em><strong><em>lt</em></strong><em>: Matches all the field values which are less than given value. Use ‘</em><strong><em>lte’ </em></strong><em>for less than or equals to.</em> </blockquote> <p><em>eg: Player.objects.filter(totalruns__lt=18820)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/710/1*urLXzS0Jsqf26W4hXgUmiQ.png"></figure> <p><em>eg: Player.objects.filter(totalruns__lte=18820)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/721/1*q-PHcJol_SuLZyNkPyUmTg.png"></figure> <blockquote> <em>7. </em><strong><em>startswith</em></strong><em>: Matches field values that starts with given value. Use ‘</em><strong><em>istartswith</em></strong><em>’ to ignore case sensitivity.</em> </blockquote> <p>eg: <em>Player.objects.filter(name__startswith=’M’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/648/1*GjvK1XaMrsX--TWOQRLBhQ.png"></figure> <blockquote> <em>8. </em><strong><em>endswith</em></strong><em>: Matches field values that ends with given value. Use ‘</em><strong><em>iendswith</em></strong><em>’ to ignore case sensitivity.</em> </blockquote> <p>eg: <em>Player.objects.filter(name__endswith=’i’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/657/1*yqE8AnBabaGx6yjSI_xcaQ.png"></figure> <blockquote> <em>9. </em><strong><em>range</em></strong><em>: Matches field dates that comes under given range. Works with both date and datetime.</em> </blockquote> <p><em>eg: Player.objects.filter(birthdate__range=(‘1980–01–01’,’1985–01–01'))</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/713/1*vI-FvaWbYk-rBawvr8liag.png"></figure> <blockquote> <em>10. </em><strong><em>date</em></strong><em>: Matches field dates with given date. Works only with datetime field.</em> </blockquote> <p>eg: <em>Player.objects.filter(testdebut__date=</em>’2005–12–02'<em>)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/648/1*DLq3cKcHqlUuXo_02JEkIw.png"></figure> <blockquote> <em>11. </em><strong><em>year</em></strong><em>: Matches year from field dates with given year. Works with both date and datetime.</em> </blockquote> <p><em>eg: Player.objects.filter(birthdate__year=1981)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/710/1*M3ynuW_CkDVWXH9hYODRqQ.png"></figure> <blockquote> <em>12. </em><strong><em>month</em></strong><em>: Matches month from field dates with given month. Works with both date and datetime.</em> </blockquote> <p>eg: <em>Player.objects.filter(birthdate__month=4)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/740/1*72RRawZeZGcZpGePYenjTA.png"></figure> <blockquote> <em>13. </em><strong><em>day</em></strong><em>: Matches day from field dates with given date. Works well with both date and datetime.</em> </blockquote> <p><em>eg: Player.objects.filter(testdebut__day=20)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/647/1*m5mxJ5iBEv6hGRp778Do3g.png"></figure> <blockquote> <em>14. </em><strong><em>week</em></strong><em>: Matches week of field dates with given week number (Normally 52 weeks). Works with both date and datetime fields.</em> </blockquote> <p><em>eg: Player.objects.filter(birthdate__week=18)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/686/1*nYu1ycRNOd5ytOe2F-NNsA.png"></figure> <blockquote> <em>15. </em><strong><em>week_day</em></strong><em>: Matches week day of field date with given week day (usually starts with sunday as 1). Works well with both date and datetime field.</em> </blockquote> <p><em>eg: Player.objects.filter(birthdate__week_day=3)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/742/1*rsig-5X1Jn6l4XWwwg6cog.png"></figure> <blockquote> <em>16. </em><strong><em>quarter</em></strong><em>: Matches quarter of field dates with given quarter. Works with both date and datetime.</em> </blockquote> <p><em>eg: Player.objects.filter</em>(birthdate__quarter=4)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/699/1*0yjIvhBUtKzkNTGbSwFivA.png"></figure> <blockquote> <em>17. </em><strong><em>time</em></strong><em>: Matches time of field with given time. Only works with datetime field.</em> </blockquote> <p><em>eg: Player.objects.filter(testdebut__time=</em>’09:33:55'<em>)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/645/1*GNX618d5tC0idmnr6QKnlA.png"></figure> <blockquote> <em>18. </em><strong><em>hour</em></strong><em>: Matches hour of the field time with given hour. Only works with datetime field.</em> </blockquote> <p><em>eg: Player.objects.filter</em>(testdebut__hour=10)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/740/1*vIKZ845TRSRKM9zyyg0S2Q.png"></figure> <blockquote> <em>19. </em><strong><em>minute</em></strong><em>: Matches minute of the field time with given minute. Only works with datetime field.</em> </blockquote> <p><em>eg: Player.objects.filter</em>(testdebut__minute=49)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/740/1*MHpQsS8FH3ujFrJtzKj-Jw.png"></figure> <blockquote> <em>20. </em><strong><em>second</em></strong><em>: Matches second of the field time with given second. Only works with datetime field.</em> </blockquote> <p><em>eg: Player.objects.filter(testdebut__second=55)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/646/1*qHKYx6aIvxKRgBBH3jO4sg.png"></figure> <blockquote> <em>21. </em><strong><em>isnull</em></strong><em>: Matches null field values. Return all not null values if False.</em> </blockquote> <p><em>eg: Player.objects.filter(jerseyno__isnull=False)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/742/1*ovc54ZRHD1HDS6xoVMeQrw.png"></figure> <blockquote> <em>22. </em><strong><em>regex</em></strong><em>: Matches the field value to described regular expression. Use ‘</em><strong><em>iregex</em></strong><em>’ to ignore case sensitivity.</em> </blockquote> <p><em>eg: Player.objects.filter(name__regex=’^.a’)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/743/1*Ruos3iAFeAe2Ud85vkLxKg.png"></figure> <blockquote> <em>23. </em><strong><em>Combining lookups</em></strong><em>: We can combine conditional lookups like gt, gte, lt, lte along with other field lookups.</em> </blockquote> <p><em>eg: Player.objects.filter</em>(testdebut__day__lt=15)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/721/1*IhI5RxWJa-MXI1XEviwwcw.png"></figure> <p><em>eg: Player.objects.filter(birthdate__year__lte=1981)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/741/1*8u16-cgl-4Nkdv7_3p1qZQ.png"></figure> <p><em>eg: Player.objects.filter</em>(birthdate__month__gt=7)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/700/1*L_AX_KjLCRKRXW1dsToLAg.png"></figure> <p><em>eg: Player.objects.filter</em>(birthdate__month__gte=7)</p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/710/1*C5hELCEWG2sTmqvBjre1bg.png"></figure> <blockquote> <em>24. </em><strong><em>Combining QuerySets</em></strong><em>: We can combine two or more QuerySets to produce required results. The latter QuerySet will apply lookup on results of earlier QuerySet.</em> </blockquote> <p>eg: <em>Player.objects.filter(jerseyno__in=[7,10,45]).filter(birthdate__month=4)</em></p> <figure><img alt="" src="https://cdn-images-1.medium.com/max/742/1*VHGPZas04gBDSbVFpt45FA.png"></figure> <p>Above all lookups can be used with both get and exclude methods, Just note that get method will raise an exception if it returns more than 1 record.</p> <blockquote>If you want to learn more about QuerySets and FieldLookups head over to Django documentation <a href="https://docs.djangoproject.com/en/5.0/ref/models/querysets/#field-lookups" rel="external nofollow noopener" target="_blank">here</a>.</blockquote> <p><img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=1eedf0c2781b" width="1" height="1" alt="">&lt;hr&gt;&lt;p&gt;<a href="https://medium.com/django-unleashed/django-queryset-field-lookups-unlocking-advanced-data-filtering-techniques-for-your-django-1eedf0c2781b" rel="external nofollow noopener" target="_blank">Django QuerySet Field Lookups: Unlocking Advanced Data Filtering Techniques for Your Django…</a> was originally published in <a href="https://medium.com/django-unleashed" rel="external nofollow noopener" target="_blank">Django Unleashed</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;</p> </body></html>